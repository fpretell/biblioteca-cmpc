FROM node:18

WORKDIR /app

# ğŸ‘‡ Aseguramos que se instalen devDependencies tambiÃ©n
ENV NODE_ENV=development

COPY package*.json ./

# ğŸ‘‡ Evitamos errores de peer dependencies
RUN npm install --legacy-peer-deps

# Nest CLI global solo si necesitÃ¡s nest en CLI
RUN npm install -g @nestjs/cli

COPY . .

RUN npm run build

CMD ["npm", "run", "start:dev"]
